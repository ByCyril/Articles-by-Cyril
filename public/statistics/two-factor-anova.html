<!DOCTYPE html>
<!--
	Editorial by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
  <head>
    <title>Two-Factor ANOVA Analysis - A Programmers Approach</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=no"
    />
    <link rel="stylesheet" href="../assets/css/main.css" />
  </head>
  <body class="is-preload">
    <!-- Wrapper -->
    <div id="wrapper">
      <!-- Main -->
      <div id="main">
        <div class="inner">
          <!-- Header -->
          <header id="header">
            <a href="#" class="logo"><strong>Articles</strong> by Cyril</a>
            <ul class="icons">
              <li>
                <a
                  href="https://twitter.com/cyrilivargarcia"
                  class="icon fa-twitter"
                  ><span class="label">Twitter</span></a
                >
              </li>
              <li>
                <a
                  href="https://www.linkedin.com/in/cyrilivargarcia/"
                  class="icon fa-linkedin"
                  ><span class="label">LinkedIn</span></a
                >
              </li>
              <li>
                <a
                  href="https://github.com/cyrilivargarcia"
                  class="icon fa-github"
                  ><span class="label">GitHub</span></a
                >
              </li>

              <li>
                <a href="https://bycyril.com/" class="icon fa-html5"
                  ><span class="label">Web</span></a
                >
              </li>
            </ul>
          </header>

          <!-- Content -->
          <section>
            <header class="main">
              <h1>Two-Factor ANOVA Analysis - A Programmers Approach</h1>
            </header>

            <span class="image main"
              ><img src="../images/img2.jpg" alt=""
            /></span>
            <section>
              <h3 align="right" id="stats"></h3>
            </section>
            <h2>Introduction</h2>
            <p>
              A two-Factor ANOVA, also known as a factorial ANOVA is when we are
              trying to determine whether one factor influences the outcome of
              an experiment over the other factor. For example, we can perform a
              two-factor ANOVA analysis if we want to study the proportion of
              popcorn kernels popped when they are in different pot sizes or
              using different fats.
            </p>
            <p>
              In other words, we want to know what influences the proportion of
              popcorn kernels popped. Is it pot sizes, fat, or both?
            </p>
            <p>
              The two factors in this example are
              <br />
              <br />
              <code>Factor A = pot sizes</code>
              <br />
              <code>Factor B = type of fat</code>
            </p>
            <hr class="major" />

            <h2>Hypothesis Testing</h2>
            <p>
              The null hypothesis of a two-factor ANOVA Analysis can be
              described as followed:
            </p>
            <pre><code>
HoA : a1 == a2 == ... == ai = 0 “No Factor A Effect”
HaA : a1 != 0 at least one ai != 0
               
HoB : b1 == b2 == ... == bi = 0 “No Factor B Effect”
HaB : b1 != 0 at least one bi != 0
            </code></pre>
            <p>
              If p-value is less than the level of significance (usually 0.05 if
              not specified), we reject the null hypothesis. Otherwise, we fail
              to reject the null hypothesis. Another way to test when to reject
              the null hypothesis is if the test statistic is greater than or
              equal to the critical value.
            </p>
            <h2 class="major">Things we need to calculate</h2>
            <p>
              <b>Note:</b> The notations used to explain a concept or a
              mathematical formula will be replaced by programming syntax;
              primarily Python pseudo syntax.
            </p>
            <pre><code>
let I = number of factors
let J = number of observations in each factor

# sum of all your data divide by the number of elements in i
let mean_of_i = sum(data) / data[i].count

# sum of all your data divide by the number of elements in j
let mean_of_j = sum(data) / data[j].count 

# sum of all your data divide by the total number of observations
let grand_mean = sum(data) / (data[i].count + data[j].count)

let SST = total sum of squares
let SSA = total sum of squares for Factor A
let SSB = total sum of squares for Factor B
let SSAB = total sum of both factors
let SSE = error sum of squares
let MSA = mean square treatment of Factor A
let MSB = mean square treatment of Factor B
let MSAB = mean square treatment of both Factors
let MSE = mean square for error
let Fa = test statistic for Factor A
let Fb = test statistic for Factor B
let Fab = test statistic for both Factors
            </code></pre>

            <h2 class="major">The Calculations</h2>
            <p>
              To demonstrate a two-factor analysis, lets work on an example:
              Given a dataset of an arithmetic test taken by a group of boys and
              girls ages 10,11, and 12. We want to figure out if the scores are
              influenced by their gender, age, or both.
            </p>
            <p>Refer to the dataset below:</p>
            <h4>Dataset</h4>
            <div class="table-wrapper">
              <table class="alt">
                <thead>
                  <tr>
                    <th>Gender</th>
                    <th>Score</th>
                    <th>Age</th>
                  </tr>
                </thead>
                <tbody>
                  <tr style="color:red">
                    <td>Boy</td>
                    <td>4</td>
                    <td>10 Years Old</td>
                  </tr>
                  <tr style="color:red">
                    <td>Boy</td>
                    <td>6</td>
                    <td>10 Years Old</td>
                  </tr>
                  <tr style="color:red">
                    <td>Boy</td>
                    <td>8</td>
                    <td>10 Years Old</td>
                  </tr>
                  <tr style="color:red">
                    <td>Girl</td>
                    <td>4</td>
                    <td>10 Years Old</td>
                  </tr>
                  <tr style="color:red">
                    <td>Girl</td>
                    <td>8</td>
                    <td>10 Years Old</td>
                  </tr>
                  <tr style="color:red">
                    <td>Girl</td>
                    <td>9</td>
                    <td>10 Years Old</td>
                  </tr>
                  <tr style="color:blue">
                    <td>Boy</td>
                    <td>6</td>
                    <td>1 Years Old</td>
                  </tr>
                  <tr style="color:blue">
                    <td>Boy</td>
                    <td>6</td>
                    <td>1 Years Old</td>
                  </tr>
                  <tr style="color:blue">
                    <td>Boy</td>
                    <td>9</td>
                    <td>11 Years Old</td>
                  </tr>
                  <tr style="color:blue">
                    <td>Girl</td>
                    <td>7</td>
                    <td>11 Years Old</td>
                  </tr>
                  <tr style="color:blue">
                    <td>Girl</td>
                    <td>10</td>
                    <td>11 Years Old</td>
                  </tr>
                  <tr style="color:blue">
                    <td>Girl</td>
                    <td>13</td>
                    <td>11 Years Old</td>
                  </tr>
                  <tr style="color:green">
                    <td>Boy</td>
                    <td>8</td>
                    <td>12 Years Old</td>
                  </tr>
                  <tr style="color:green">
                    <td>Boy</td>
                    <td>9</td>
                    <td>12 Years Old</td>
                  </tr>
                  <tr style="color:green">
                    <td>Boy</td>
                    <td>13</td>
                    <td>12 Years Old</td>
                  </tr>
                  <tr style="color:green">
                    <td>Girl</td>
                    <td>12</td>
                    <td>12 Years Old</td>
                  </tr>
                  <tr style="color:green">
                    <td>Girl</td>
                    <td>14</td>
                    <td>12 Years Old</td>
                  </tr>
                  <tr style="color:green">
                    <td>Girl</td>
                    <td>16</td>
                    <td>12 Years Old</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <p>
              The best way to do the calculations is to create a table of means
              for Factor A and Factor B. In this dataset, we can represent
              Gender as Factor A and we can represent Age as Factor B. The
              assignment Factors are irrelevant, it is just a way to label our
              sets.
            </p>

            <h4>Table of Means</h4>
            <div class="table-wrapper">
              <table class="alt">
                <thead>
                  <tr>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td></td>
                    <td>10 Year Olds</td>
                    <td>11 Year Olds</td>
                    <td>12 Year Olds</td>
                    <td>Average</td>
                  </tr>
                  <tr>
                    <td>Boys</td>
                    <td>6</td>
                    <td>7</td>
                    <td>10</td>
                    <td>7.7</td>
                  </tr>
                  <tr>
                    <td>Girls</td>
                    <td>7</td>
                    <td>10</td>
                    <td>14</td>
                    <td>10.3</td>
                  </tr>
                  <tr>
                    <td>Average</td>
                    <td>6.5</td>
                    <td>8.5</td>
                    <td>12</td>
                    <td>Grand Mean: <b>9</b></td>
                  </tr>
                </tbody>
              </table>
            </div>
            <h2 class="major">Calculations</h2>
            <p>
              Next, we want to calculate all the predefined variables we made
              earlier.
            </p>
            <p>To calculate the SST</p>
            <pre><code>
function get_sst(data);
    sst = 0
    for item in data:
        sst += (item - grand_mean)**2
    return sst
            </code></pre>
            <p>To calculate the SSA and SSB</p>
            <pre><code>
Function get_ss(data):
    ss = 0
    for group in data:
        group_mean = sum(group) / len(group)

        for item in group:
            ss += (group_mean - grand_mean)**2

    return ss
            </code></pre>
            <p>To calculate the grand mean</p>
            <pre><code>
Function get_grand_mean(data):
    sum = 0
    item_count = 0

    for group in data:
        for item in group:
            sum += item
            item_count += 1

    return sum / item_count 
            </code></pre>
            <p>To calculate the SSE</p>
            <pre><code>
Function get_sse(data):
    sse = 0
    df = 0
    for group in data:
        for sub_group in group:
            means = sum(sub_group) / sub_group.count
            df += sub_group.count - 1

            for item in sub_group:
                sse += (item - means)**2

    return sse, df
            </code></pre>
            <p>
              To start using these functions, first we need to format our data
              appropriately
            </p>
            <pre><code>
# All of the data
let raw_data = [4,6,8,6,6,9,8,9,13,4,8,9,7,10,13,12,14,16]

# Organized by [boys score] [girls score]
let factor_A = [[4,6,8,6,6,9,8,9,13],[4,8,9,7,10,13,12,14,16]] 

# Organized by [10 year olds] [11 year olds] [12 year olds]
let factor_B = [[4,6,8,4,8,9],[6,6,9,7,10,13],[8,9,13,12,14,16]]

# Organized by 
# [[boys 10 year old scores],[boys 11 year old scores],[boys 12 year old scores]]
# [[girls 10 year old scores],[girls 11 year old scores],[girls 12 year old scores]]
let grouped_data = [[[4,6,8],[6,6,9],[8,9,13]],[[4,8,9],[7,10,13],[12,14,16]]]   
            </code></pre>
            <p>The rest of the calculations</p>
            <pre><code>
Grand_mean = get_grand_mean(factor_A) # or factor B
SST = get_sst(raw_data)
SSA = get_ss(factor_A)
SSB = get_ss(factor_B)
SSE = get_sse(grouped_data)
SSAB = SST - SSA - SSB - SSE[0]

df1 = i - 1
df2 = j - 1
df3 = SSE[1]
df4 = df1 * df2
df5 = df1 + df2 + df3 + df4

MSA = SSA / df1
MSB = SSB / df2
MSE = SSE[0] / df3
MSAB = SSAB / df4

# Test statistic
Fa = MSA / MSE
Fb = MSB / MSE
Fab = MSAB / MSE
            </code></pre>
            <p>Your results should be the following:</p>
            <pre><code>   
1 2 12 2 17 # df1, df2, df3, df4, df5 respectivley

SSA 32.0
SSB 93.0
SSE 68.0
SST 200.0
SSAB 7.0

MSA 32.0
MSB 46.5
MSE 5.666666666666667
MSAB 3.5

Test statistics
Fa 5.647058823529411
Fb 8.205882352941176
Fab 0.6176470588235293
            </code></pre>
            <h2 class="major">Interpreting the Results</h2>
            <p>
              After calculating the test statistic, we need to determine based
              on the test statistic when to reject the null hypothesis. If Fa is
              greater than the critical value, we reject the null hypothesis.
              Otherwise we fail to reject the null hypothesis. Same is try with
              the Fb test statistic.
            </p>
          </section>
        </div>
      </div>

      <!-- Sidebar -->
      <div id="sidebar">
        <div class="inner">
          <!-- Menu -->
          <nav id="menu">
            <header class="major">
              <h2>Menu</h2>
            </header>
            <ul>
              <li><a href="../index.html">Home</a></li>
              <li><a href="../ios-engineering.html">iOS Engineering</a></li>
              <li>
                <a href="../artificial-intelligence.html"
                  >Artificial Intelligence</a
                >
              </li>
              <li>
                <a href="../statistics-and-data-science.html"
                  >Statistics and Data Science</a
                >
              </li>
              <li><a href="../blog.html">Blog</a></li>
            </ul>
          </nav>

          <!-- Section -->
          <section>
            <header class="major">
              <h2>Projects by Cyril</h2>
            </header>
            <div class="mini-posts">
              <article>
                <a href="#" class="image"
                  ><img src="../images/memo.jpeg" alt=""
                /></a>
                <h2>Memo</h2>
                <p>
                  Take and organize notes like text messages.
                </p>
              </article>
              <article>
                <a href="#" class="image"
                  ><img src="../images/geekweather.jpeg" alt=""
                /></a>
                <h2>GeekWeather</h2>

                <p>
                  A simple weather app with an aesthetically user interface.
                </p>
              </article>
              <article>
                <a href="#" class="image"
                  ><img src="../images/filestorks.jpeg" alt=""
                /></a>
                <h2>FileStorks.com</h2>

                <p>
                  A quick and easy way to share files.
                </p>
              </article>
            </div>
          </section>

          <!-- Section -->
          <section>
            <header class="major">
              <h2>Connect with me!</h2>
            </header>
            <p>
              Open to collaboration opportunities, topic suggestions, or any
              questions!
            </p>
            <ul class="contact">
              <li class="fa-envelope">
                <a href="#">garciacy at bycyril dot com</a>
              </li>
              <li class="fa-twitter">
                <a href="https://twitter.com/cyrilivargarcia"
                  >@cyrilivargarcia</a
                >
              </li>
              <li class="fa-linkedin">
                <a href="https://www.linkedin.com/in/cyrilivargarcia/"
                  >in/cyrilivargarcia</a
                >
              </li>
            </ul>
          </section>

          <!-- Footer -->
          <!-- Footer -->
          <footer id="footer">
            <p class="copyright">
              &copy; Website developed by <br />AJ aj@lkn.io | @ajlkn
              <br />
              <a href="https://html5up.net">HTML5 UP</a>.
            </p>
          </footer>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="../assets/js/jquery.min.js"></script>
    <script src="../assets/js/browser.min.js"></script>
    <script src="../assets/js/breakpoints.min.js"></script>
    <script src="../assets/js/util.js"></script>
    <script src="../assets/js/main.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.5.0/firebase.js"></script>
    <script src="../analytics/analytics.js"></script>
  </body>
</html>
